# simpleBBS アプリケーション 仕様書

## 1. 概要

本アプリケーションは、Servlet / JSP / Tomcat を用いた学習用の簡易掲示板（BBS）である。

* Servlet と JSP の役割分担（MVCの基礎）
* リクエスト / レスポンスの流れ
* forward 処理
* 入力バリデーション
* セッション・クッキーの利用
* CSS による画面装飾

を理解することを目的としている。

---

## 2. 開発環境

| 項目    | 内容                                                                 |
| ----- | ------------------------------------------------------------------ |
| IDE   | Eclipse 2024（日本語）                                                  |
| Java  | Java 21                                                            |
| サーバ   | Apache Tomcat 9.0.x                                                |
| 実行URL | [http://localhost:8080/simpleBBS](http://localhost:8080/simpleBBS) |

---

## 3. プロジェクト構成

```
simpleBBS
 ├ css
 │   └ style.css
 ├ WEB-INF
 │   ├ pages
 │   │   ├ createPage.jsp
 │   │   ├ listPage.jsp
 │   │   └ completePage.jsp
 │   └ web.xml
 ├ src
 │   └ bbsServlet
 │       ├ CreateServlet.java
 │       ├ ListServlet.java
 │       ├ Post.java
 │       └ PostRepository.java
 └ index.jsp
```

---

## 4. 画面一覧

| 画面名  | URL               | 説明       |
| ---- | ----------------- | -------- |
| 一覧画面 | /simpleBBS/list   | 投稿一覧を表示  |
| 投稿画面 | /simpleBBS/create | 新規投稿フォーム |
| 完了画面 | Servlet forward   | 投稿完了表示   |

※ WEB-INF 配下の JSP は直接アクセス不可

---

## 5. 機能仕様

### 5.1 投稿一覧表示機能

**Servlet** : ListServlet

* URL: `/list`
* 処理内容

  * PostRepository から投稿一覧を取得
  * request に `postList` をセット
  * listPage.jsp に forward

---

### 5.2 新規投稿機能

**Servlet** : CreateServlet

#### GET 処理

* 投稿フォームを表示
* クッキーに保存された名前があれば自動入力

#### POST 処理

* 入力値を取得
* バリデーション

  * 名前：必須
  * コメント：必須
* エラー時

  * エラーメッセージ表示
  * 入力値保持
* 正常時

  * Post オブジェクト生成
  * PostRepository に保存
  * セッション・クッキーに名前保存
  * 完了画面へ遷移

---

## 6. バリデーション仕様

| 項目   | 条件  | エラーメッセージ      |
| ---- | --- | ------------- |
| 名前   | 未入力 | 名前を入力してください   |
| コメント | 未入力 | コメントを入力してください |

---

## 7. データ仕様

### 7.1 Post クラス

| フィールド   | 型      | 内容   |
| ------- | ------ | ---- |
| name    | String | 投稿者名 |
| comment | String | 投稿内容 |

---

### 7.2 PostRepository

* 投稿データをメモリ上の List で保持
* サーバ停止でデータ消失

---

## 8. セッション・クッキー仕様

### セッション

| キー       | 内容   |
| -------- | ---- |
| username | 投稿者名 |

### クッキー

| 名前       | 保存内容 | 期限   |
| -------- | ---- | ---- |
| username | 投稿者名 | 約30日 |

---

## 9. 画面デザイン

* 共通 CSS（style.css）を使用
* container クラスで画面中央寄せ
* btn クラスでボタン装飾
* input-field で入力欄統一

---

## 10. 学習ポイント

* Servlet と JSP の責務分離
* forward と redirect の違い
* WEB-INF 配下 JSP の意味
* contextPath を使った安全なパス指定
* JSP 構文エラーの典型例
* セッションとクッキーの役割の違い

---

## 11. 今後の拡張案

* 投稿削除・編集機能
* 投稿日時の追加
* DB（JDBC）連携
* ログイン機能
* フィルタ（文字数制限・XSS対策）

---

以上
